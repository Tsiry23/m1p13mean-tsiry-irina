<div class="layout" id="container">
  <app-mall-admin-sidebar></app-mall-admin-sidebar>

  <main class="content p-4">

    <h1 class="h3 mb-4">Historique des paiements</h1>

    <!-- üîç Filtres -->
    <div class="card mb-4">
      <div class="card-body">
        <form class="row g-3 align-items-end">

          <!-- Boutique -->
          <div class="col-md-4">
            <label class="form-label">Boutique</label>
            <select class="form-select" [(ngModel)]="filters.id_boutique" name="id_boutique">
              <option value="">Toutes les boutiques</option>
              <option *ngFor="let b of boutiques" [value]="b._id">
                {{ b.nom }}
              </option>
            </select>
          </div>

          <!-- Date d√©but -->
          <div class="col-md-3">
            <label class="form-label">Date d√©but</label>
            <input
              type="date"
              class="form-control"
              [(ngModel)]="filters.dateDebut"
              name="dateDebut"
            />
          </div>

          <!-- Date fin -->
          <div class="col-md-3">
            <label class="form-label">Date fin</label>
            <input
              type="date"
              class="form-control"
              [(ngModel)]="filters.dateFin"
              name="dateFin"
            />
          </div>

          <!-- Bouton -->
          <div class="col-md-2 d-grid">
            <button type="button" class="btn btn-primary" (click)="search()">
              <i class="bi bi-search"></i> Rechercher
            </button>
          </div>

        </form>
      </div>
    </div>

    <!-- üìÑ Liste -->
    <div class="card">
      <div class="card-body p-0">

        <table class="table table-hover mb-0 align-middle">
          <thead class="table-light">
            <tr>
              <th>Boutique</th>
              <th>Date</th>
              <th class="text-end">Montant (Ar)</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let p of paiements">
              <td>{{ p.id_boutique.nom }}</td>
              <td>{{ p.date_ | date:'dd/MM/yyyy HH:mm' }}</td>
              <td class="text-end fw-bold">
                {{ p.total_a_payer | number:'1.0-0' }}
              </td>
            </tr>

            <tr *ngIf="paiements.length === 0">
              <td colspan="3" class="text-center text-muted py-4">
                Aucun paiement trouv√©
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <!-- üí∞ Total -->
      <div class="card-footer text-end fw-bold">
        Total : {{ total | number:'1.0-0' }} Ar
      </div>
    </div>

  </main>
</div>
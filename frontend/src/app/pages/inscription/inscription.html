<div class="login-wrapper d-flex justify-content-center align-items-center min-vh-100">
  <div class="login-card">

    <!-- Panneau gauche : formulaire d'inscription -->
    <div class="login-form-panel">
      <div class="login-form-inner">

        <div class="login-header">
          <p class="login-welcome">BIENVENUE SUR</p>
          <div class="login-brand">
            <span class="brand-name">m1p13meantsiryirina</span>
          </div>
          <p class="login-subtitle">Créez votre compte pour commencer dès maintenant.</p>
        </div>

        <form (ngSubmit)="inscrire()" #inscriptionForm="ngForm" class="login-form">

          <!-- Nom -->
          <div class="field-group">
            <div class="input-wrapper">
              <i class="bi bi-person field-icon"></i>
              <input
                type="text"
                class="field-input"
                name="nom"
                [(ngModel)]="nom"
                placeholder="Nom"
                required
                minlength="2"
                #nomCtrl="ngModel"
              />
            </div>
            @if (nomCtrl.invalid && (nomCtrl.dirty || nomCtrl.touched)) {
              <div class="field-error">
                Le nom est requis (min. 2 caractères)
              </div>
            }
          </div>

          <!-- Prénom -->
          <div class="field-group">
            <div class="input-wrapper">
              <i class="bi bi-person-fill field-icon"></i>
              <input
                type="text"
                class="field-input"
                name="prenom"
                [(ngModel)]="prenom"
                placeholder="Prénom"
                required
                minlength="2"
                #prenomCtrl="ngModel"
              />
            </div>
            @if (prenomCtrl.invalid && (prenomCtrl.dirty || prenomCtrl.touched)) {
              <div class="field-error">
                Le prénom est requis (min. 2 caractères)
              </div>
            }
          </div>

          <!-- Email -->
          <div class="field-group">
            <div class="input-wrapper">
              <i class="bi bi-envelope field-icon"></i>
              <input
                type="email"
                class="field-input"
                name="email"
                [(ngModel)]="email"
                placeholder="Adresse email"
                required
                email
                #emailCtrl="ngModel"
              />
            </div>
            @if (emailCtrl.invalid && (emailCtrl.dirty || emailCtrl.touched)) {
              <div class="field-error">
                @if (emailCtrl.errors?.['required']) {L'email est requis}
                @else {Format email invalide}
              </div>
            }
          </div>

          <!-- Mot de passe -->
          <div class="field-group">
            <div class="input-wrapper">
              <i class="bi bi-lock field-icon"></i>
              <input
                [type]="showPassword ? 'text' : 'password'"
                class="field-input"
                name="mdp"
                [(ngModel)]="mdp"
                placeholder="Mot de passe"
                required
                minlength="6"
                #mdpCtrl="ngModel"
              />
              <button
                type="button"
                class="toggle-password"
                (click)="togglePassword()"
                tabindex="-1"
              >
                <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
              </button>
            </div>
            @if (mdpCtrl.invalid && (mdpCtrl.dirty || mdpCtrl.touched)) {
              <div class="field-error">
                Le mot de passe doit contenir au moins 6 caractères
              </div>
            }
          </div>

          <!-- Message erreur serveur -->
          @if (errorMessage) {
            <div class="error-message">
              <i class="bi bi-exclamation-circle"></i>
              {{ errorMessage }}
            </div>
          }

          @if (successMessage) {
            <div class="success-message">
              <i class="bi bi-check-circle"></i>
              {{ successMessage }}
            </div>
          }

          <!-- Bouton -->
          <button
            type="submit"
            class="btn-signin"
            [disabled]="loading || !inscriptionForm.valid"
          >
            @if (loading) {
              <span class="spinner"></span>
              Inscription en cours...
            } @else {
              Créer mon compte
            }
          </button>

          <p class="signup-link">
            Déjà un compte ?
            <a href="/login">Se connecter</a>
          </p>

        </form>
      </div>
    </div>

    <!-- Panneau droit : visuel (identique au login) -->
    <div class="login-visual-panel">
      <div class="visual-overlay"></div>
      <div class="visual-content">
        <div class="visual-logo">
          <i class="bi bi-infinity visual-logo-icon"></i>
          <span class="visual-logo-text">m1p13meantsiryirina</span>
        </div>
        <p class="visual-tagline">
          Votre plateforme tout-en-un pour gérer, collaborer et performer au quotidien.
        </p>
      </div>
    </div>

  </div>
</div>